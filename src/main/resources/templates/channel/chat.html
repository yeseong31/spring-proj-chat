<!DOCTYPE html>
<html xmlns:th="http://www.thymeleaf.org" class="h-100" data-bs-theme="auto" lang="en">
<head>
  <meta charset="utf-8">
  <meta name="viewport" content="width=device-width, initial-scale=1">
  <meta name="description" content="">
  <title>채팅 페이지</title>
  <link href="https://cdn.jsdelivr.net/npm/bootstrap@5.3.0/dist/css/bootstrap.min.css"
        rel="stylesheet"
        integrity="sha384-9ndCyUaIbzAi2FUVXJi0CjmCapSmO7SnpJef0486qhLnuZ2cdeRhO02iuK6FUUVM"
        crossorigin="anonymous">
  <!-- Custom CSS -->
  <link th:href="@{/css/cover.css}" rel="stylesheet">
</head>
<body class="d-flex h-100 text-center text-bg-dark">

<div class="cover-container d-flex w-100 h-100 p-3 mx-auto flex-column">
  <header class="mb-auto">
    <div>
      <h3 class="float-md-start mb-0">Cover</h3>
      <!-- navbar -->
      <nav class="nav nav-masthead justify-content-center float-md-end">
        <a class="nav-link fw-bold py-1 px-0 active"
           aria-current="page" href="#" th:href="@{/home}">Home</a>
        <a class="nav-link fw-bold py-1 px-0" href="#">Features</a>
        <a class="nav-link fw-bold py-1 px-0" href="#">Contact</a>
      </nav>
    </div>
  </header>
  
  <div id="memberUuid" th:text="${memberUuid}" hidden></div>

  <!-- content -->
  <main class="px-3">
    <noscript>
      <h2 style="color: #ff0000">
        Seems your browser doesn't support Javascript!
        Websocket relies on Javascript being enabled.
        Please enable Javascript and reload this page!</h2>
    </noscript>

    <div class="container py-5" data-bs-theme="dark">
      <div class="row d-flex justify-content-center">
        <div class="col-md-10 col-lg-8 col-xl-10">
          <!-- Card -->
          <div class="card" id="chat2" style="min-height: 1000px; max-height: 1000px">
            <!-- Card Header -->
            <div class="card-header d-flex justify-content-between align-items-center p-3">
              <h4 class="mb-0" th:text="${channelName}"></h4>
              <!-- close button -->
              <button id="disconnect" type="button" class="btn btn-danger"
                      style="margin-top: 1px; margin-left: 2px"
                      th:onclick="|location.href='@{/channel/list}'|">나가기</button>
            </div>
            <!-- Card Body -->
            <div class="card-body overflow-auto"
                 style="display:flex; flex-direction: column-reverse; overflow-y:auto">

              <!-- 상대방 -->
<!--              <div class="d-flex flex-row justify-content-start">-->
<!--                <div>-->
<!--                  <p class="small p-2 ms-3 mb-1 rounded-3"-->
<!--                     style="background-color: #f5f6f7; color: black">Hi</p>-->
<!--                  <p class="small p-2 ms-3 mb-1 rounded-3"-->
<!--                     style="background-color: #f5f6f7; color: black">How are you ...???</p>-->
<!--                  <p class="small p-2 ms-3 mb-1 rounded-3"-->
<!--                     style="background-color: #f5f6f7; color: black">What are you doing tomorrow?-->
<!--                    Can we come up a bar?</p>-->
<!--                  <p class="small ms-3 mb-3 rounded-3 text-muted d-flex">23:58</p>-->
<!--                </div>-->
<!--              </div>-->

              <!-- 구분선(Today) -->
<!--              <div class="divider align-items-center mb-4">-->
<!--                <p class="text-center mx-3 mb-0" style="color: #a2aab7;">Today</p>-->
<!--              </div>-->

              <!-- 본인 -->
<!--              <div class="d-flex flex-row justify-content-end mb-4 pt-1">-->
<!--                <div>-->
<!--                  <p class="small p-2 me-3 mb-1 text-white rounded-3 bg-primary">Hi, I'm good.</p>-->
<!--                  <p class="small p-2 me-3 mb-1 text-white rounded-3 bg-primary">How are you-->
<!--                    doing?</p>-->
<!--                  <p class="small p-2 me-3 mb-1 text-white rounded-3 bg-primary">Long time no see!-->
<!--                    Tomorrow office. will be free on sunday.</p>-->
<!--                  <p class="small me-3 mb-3 rounded-3 text-muted d-flex justify-content-end">-->
<!--                    00:06</p>-->
<!--                </div>-->
<!--              </div>-->

              <!-- chat list -->
              <table id="conversation" class="table table-striped">
                <tbody id="greetings">

                </tbody>
              </table>

            </div><!-- end Card Body -->

            <form class="form-inline" th:action="@{/pub/message}">
              <div class="card-footer text-muted d-flex justify-content-start align-items-center p-3">
                <div class="input-group">
                  <label for="content"></label>
                  <input type="text" id="content" class="form-control" placeholder="메시지를 입력해 주세요">
                  <button id="send" class="btn btn-secondary" type="submit">전송</button>
                </div>
              </div>
            </form>

          </div><!-- end Card -->

        </div>
      </div>
    </div>
  </main>

  <!-- footer -->
  <footer class="mt-auto text-white-50">
    <p><a href="https://github.com/yeseong31" class="text-white">@yeseong31</a>.</p>
  </footer>
</div>

<script src="https://code.jquery.com/jquery-3.1.1.min.js"></script>
<script src="https://cdn.jsdelivr.net/npm/@stomp/stompjs@7.0.0/bundles/stomp.umd.min.js"></script>
<script th:src="@{/js/stomp.js}"></script>
</body>
</html>